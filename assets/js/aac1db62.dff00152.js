"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8963],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>g});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=a.createContext({}),c=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(i.Provider,{value:t},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,s=e.originalType,i=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),m=c(n),d=r,g=m["".concat(i,".").concat(d)]||m[d]||u[d]||s;return n?a.createElement(g,o(o({ref:t},p),{},{components:n})):a.createElement(g,o({ref:t},p))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=n.length,o=new Array(s);o[0]=d;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l[m]="string"==typeof e?e:r,o[1]=l;for(var c=2;c<s;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},6640:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>o,default:()=>u,frontMatter:()=>s,metadata:()=>l,toc:()=>c});var a=n(7462),r=(n(7294),n(3905));const s={sidebar_label:"message_bus",title:"core.messaging.message_bus"},o=void 0,l={unversionedId:"reference/backend/core/messaging/message_bus",id:"reference/backend/core/messaging/message_bus",title:"core.messaging.message_bus",description:"MessageBus Objects",source:"@site/docs/reference/backend/core/messaging/message_bus.md",sourceDirName:"reference/backend/core/messaging",slug:"/reference/backend/core/messaging/message_bus",permalink:"/docs/reference/backend/core/messaging/message_bus",draft:!1,tags:[],version:"current",frontMatter:{sidebar_label:"message_bus",title:"core.messaging.message_bus"},sidebar:"backendSidebar",previous:{title:"message",permalink:"/docs/reference/backend/core/messaging/message"},next:{title:"message_bus_protocol",permalink:"/docs/reference/backend/core/messaging/message_bus_protocol"}},i={},c=[{value:"MessageBus Objects",id:"messagebus-objects",level:2},{value:"__init__",id:"__init__",level:4},{value:"add_service",id:"add_service",level:4},{value:"remove_service",id:"remove_service",level:4},{value:"run",id:"run",level:4},{value:"dispatch",id:"dispatch",level:4},{value:"network",id:"network",level:4}],p={toc:c},m="wrapper";function u(e){let{components:t,...n}=e;return(0,r.kt)(m,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"messagebus-objects"},"MessageBus Objects"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"class MessageBus()\n")),(0,r.kt)("p",null,"Bus for dispatching messages."),(0,r.kt)("p",null,"The message bus is probably the most central aspect of the system as a whole. It not only invokes local message handlers (which are basically\ncallback functions), it also sends messages across the network to other components if necessary. The message bus on the remote side will then\ndecide what to do with the incoming message: Dispatch it locally there, send it to yet another component, or just ignore it."),(0,r.kt)("p",null,"Message handlers are always registered through a ",(0,r.kt)("inlineCode",{parentName:"p"},"MessageService"),". When a message gets dispatched locally by the bus, it will call any handlers\nassociated with the message (via its name). If a message needs to be sent to another component, the bus will invoke the ",(0,r.kt)("inlineCode",{parentName:"p"},"NetworkEngine")," to do\nso."),(0,r.kt)("p",null,"To be error tolerant, any exceptions that arise during message handling will be logged but won","'","t result in program termination."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Notes"),":"),(0,r.kt)("p",null,"  The message bus is thread-safe."),(0,r.kt)("h4",{id:"__init__"},"_","_","init","_","_"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"def __init__(comp_data: BackendComponentData)\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Arguments"),":"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"comp_data")," - The global component data.")),(0,r.kt)("h4",{id:"add_service"},"add","_","service"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"def add_service(svc: MessageService) -> bool\n")),(0,r.kt)("p",null,"Adds a new message service to the bus."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Arguments"),":"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"svc")," - The message service to add.")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Returns"),":"),(0,r.kt)("p",null,"  Whether the message service was added."),(0,r.kt)("h4",{id:"remove_service"},"remove","_","service"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"def remove_service(svc: MessageService) -> bool\n")),(0,r.kt)("p",null,"Removes a message service from the bus."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Arguments"),":"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"svc")," - The message service to remove.")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Returns"),":"),(0,r.kt)("p",null,"  Whether the message service was removed."),(0,r.kt)("h4",{id:"run"},"run"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"def run() -> None\n")),(0,r.kt)("p",null,"Initiates periodic tasks performed by the bus."),(0,r.kt)("h4",{id:"dispatch"},"dispatch"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"def dispatch(msg: Message, msg_meta: MessageMetaInformationType) -> None\n")),(0,r.kt)("p",null,"Dispatches a message."),(0,r.kt)("p",null,"To do so, the message is first checked for validity (whether it actually ",(0,r.kt)("em",{parentName:"p"},"may")," be dispatched). If it is valid,\nthe ",(0,r.kt)("inlineCode",{parentName:"p"},"MessageRouter")," will determine if it needs to be dispatched to another component or locally (or both)."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Arguments"),":"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"msg")," - The message to be dispatched."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"msg_meta")," - The message meta information.")),(0,r.kt)("h4",{id:"network"},"network"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"@property\ndef network() -> NetworkEngine\n")),(0,r.kt)("p",null,"The network engine instance."))}u.isMDXComponent=!0}}]);