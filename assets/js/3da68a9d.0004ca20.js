"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1378],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},g="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,s=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),g=c(n),u=a,m=g["".concat(l,".").concat(u)]||g[u]||d[u]||s;return n?r.createElement(m,o(o({ref:t},p),{},{components:n})):r.createElement(m,o({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var s=n.length,o=new Array(s);o[0]=u;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[g]="string"==typeof e?e:a,o[1]=i;for(var c=2;c<s;c++)o[c]=n[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},2054:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>s,metadata:()=>i,toc:()=>c});var r=n(7462),a=(n(7294),n(3905));const s={sidebar_label:"message_context",title:"core.messaging.handlers.message_context"},o=void 0,i={unversionedId:"reference/backend/core/messaging/handlers/message_context",id:"reference/backend/core/messaging/handlers/message_context",title:"core.messaging.handlers.message_context",description:"MessageContext Objects",source:"@site/docs/reference/backend/core/messaging/handlers/message_context.md",sourceDirName:"reference/backend/core/messaging/handlers",slug:"/reference/backend/core/messaging/handlers/message_context",permalink:"/docs/reference/backend/core/messaging/handlers/message_context",draft:!1,tags:[],version:"current",frontMatter:{sidebar_label:"message_context",title:"core.messaging.handlers.message_context"},sidebar:"backendSidebar",previous:{title:"event",permalink:"/docs/reference/backend/core/messaging/event"},next:{title:"message_handler",permalink:"/docs/reference/backend/core/messaging/handlers/message_handler"}},l={},c=[{value:"MessageContext Objects",id:"messagecontext-objects",level:2},{value:"__init__",id:"__init__",level:4},{value:"is_entrypoint_local",id:"is_entrypoint_local",level:4},{value:"is_entrypoint_server",id:"is_entrypoint_server",level:4},{value:"is_entrypoint_client",id:"is_entrypoint_client",level:4},{value:"message_builder",id:"message_builder",level:4},{value:"logger",id:"logger",level:4},{value:"config",id:"config",level:4}],p={toc:c},g="wrapper";function d(e){let{components:t,...n}=e;return(0,a.kt)(g,(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"messagecontext-objects"},"MessageContext Objects"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"class MessageContext()\n")),(0,a.kt)("p",null,"An execution context for messages dispatched by the message bus."),(0,a.kt)("p",null,"When a message handler gets executed (i.e., called by the message bus dispatchers), an instance of ",(0,a.kt)("inlineCode",{parentName:"p"},"MessageContext")," (or a subclass)\nis passed to the handler. This context can be seen as a ",(0,a.kt)("em",{parentName:"p"},"unit of work")," that exists during the execution of the handler. Its main task is to\nhold data that is specific to this single execution."),(0,a.kt)("p",null,"A message context is used as a context manager. In its ",(0,a.kt)("inlineCode",{parentName:"p"},"__exit__")," method, any exceptions will be catched, printed and passed on. This\nmakes tracing of errors that occur during message handling easier."),(0,a.kt)("p",null,"It is also possible to have message handlers receive custom subtypes of this class. See ",(0,a.kt)("inlineCode",{parentName:"p"},"Component")," and its ",(0,a.kt)("inlineCode",{parentName:"p"},"create_service")," method for\ndetails."),(0,a.kt)("h4",{id:"__init__"},"_","_","init","_","_"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"def __init__(msg_meta: MessageMetaInformation, msg_builder: MessageBuilder, *,\n             logger: LoggerProtocol, config: Configuration)\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Arguments"),":"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"msg_builder")," - A ",(0,a.kt)("inlineCode",{parentName:"li"},"MessageBuilder")," to be assigned to this context."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"msg_meta")," - The meta information of the message."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"logger")," - A logger that is configured to automatically print the trace belonging to the message that caused the handler to be executed."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"config")," - The global component configuration.")),(0,a.kt)("h4",{id:"is_entrypoint_local"},"is","_","entrypoint","_","local"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"@property\ndef is_entrypoint_local() -> bool\n")),(0,a.kt)("p",null,"Whether the message entered locally."),(0,a.kt)("h4",{id:"is_entrypoint_server"},"is","_","entrypoint","_","server"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"@property\ndef is_entrypoint_server() -> bool\n")),(0,a.kt)("p",null,"Whether the message entered through the server."),(0,a.kt)("h4",{id:"is_entrypoint_client"},"is","_","entrypoint","_","client"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"@property\ndef is_entrypoint_client() -> bool\n")),(0,a.kt)("p",null,"Whether the message entered through the client."),(0,a.kt)("h4",{id:"message_builder"},"message","_","builder"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"@property\ndef message_builder() -> MessageBuilder\n")),(0,a.kt)("p",null,"The message builder to be used within this context."),(0,a.kt)("h4",{id:"logger"},"logger"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"@property\ndef logger() -> LoggerProtocol\n")),(0,a.kt)("p",null,"The logger to be used within this context."),(0,a.kt)("h4",{id:"config"},"config"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"@property\ndef config() -> Configuration\n")),(0,a.kt)("p",null,"The global component configuration."))}d.isMDXComponent=!0}}]);